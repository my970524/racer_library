{% extends 'base.html' %}

{% block customCss %}
    <link rel="stylesheet" href="{{ url_for ('static', filename='./custom/login.css') }}">
{% endblock %}

{% block scripts %}
    <script>
        function regist() {
            let email = $("#email").val()
            let name = $("#name").val()
            let pwd = $("#pwd").val()
            let pwd2 = $("#pwd2").val()

            if(pwd != pwd2) {
                alert("ë¹„ë°€ë²ˆí˜¸ë¥¼ ë‹¤ì‹œ í™•ì¸í•´ ì£¼ì„¸ìš”!ğŸ˜†");
                return;
            }
            $.ajax({
                url: "/register",
                type: "post",
                data: {
                    'email': email,
                    'name': name,
                    'pwd': pwd,
                },
                success: function(res) {
                    if(res['result'] == 'success') {
                        alert("íšŒì›ê°€ì…ì´ ì„±ê³µì ìœ¼ë¡œ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!ğŸ‘")
                        window.location.href = '/login'
                    } else if(res['result'] == "email_check") {
                        alert("ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì´ë©”ì¼ ì…ë‹ˆë‹¤.ğŸ˜")
                    } else {
                        alert("ë¹„ë°€ë²ˆí˜¸ëŠ” 8ìë¦¬ ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤!ğŸ˜²")
                    }
                }
            });
        }
    </script>
{% endblock %}

{% block content %}
    <div class="container">
        <h1>íšŒì›ê°€ì… í•´ì£¼ì„¸ìš”</h1>
        <form class="was-validated">
            <div class="form-group">
                <input type="email" class="form-control" id="email" placeholder="Enter Email" name="email" required>
                <div class="valid-feedback">Valid.</div>
                <div class="invalid-feedback">Please fill out this field.</div>
            </div>
            <div class="form-group">
                <input type="text" class="form-control" id="name" placeholder="What's your name?" name="name" required>
                <div class="valid-feedback">Valid.</div>
                <div class="invalid-feedback">Please fill out this field.</div>
            </div>
            <div class="form-group">
                <input type="password" class="form-control" id="pwd" placeholder="Enter password" name="password" required>
                <div class="valid-feedback">Valid.</div>
                <div class="invalid-feedback">Please fill out this field.</div>
            </div>
            <div class="form-group">
                <input type="password" class="form-control" id="pwd2" placeholder="Password Check" required>
                <div class="valid-feedback">Valid.</div>
                <div class="invalid-feedback">Please fill out this field.</div>
            </div>
        </form>
        <button onclick=regist() class="btn btn-warning">Submit</button>
    </div>
{% endblock %}